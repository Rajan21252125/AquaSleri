import{r as m,j as e,A as w,B as d,D as E,x as D}from"./index-CQuxnmGs.js";import{S as F,M as A,A as C}from"./index-CDbeClKP.js";const q=()=>{const[r,c]=m.useState({name:"",description:"",category:[],images:[],realPrice:"",discountedPrice:""}),[i,u]=m.useState({}),[g,p]=m.useState(!1),h=[{value:"Water Purifier",label:"Water Purifier"},{value:"Water Solution",label:"Water Solution"},{value:"New Arrival",label:"New Arrival"},{value:"Service",label:"Service"}],x=t=>{const a=t.map(s=>s.value);c({...r,category:a})},o=t=>{const{name:a,value:s}=t.target;c({...r,[a]:s})},b=t=>{const{name:a,files:s}=t.target;if(a==="images"&&a==="images"){const l=Array.from(s),P=["image/jpeg","image/jpg","image/png"],n=l.filter(v=>P.includes(v.type));if(n.length!==l.length){d.error("Please upload only JPG, JPEG, or PNG files");return}if(r.images.length+n.length>5){d.error("You can only upload up to 5 images");return}c({...r,images:[...r.images,...n.slice(0,5-r.images.length)]})}},f=async t=>{t.preventDefault();const a={};if(r.name.trim()||(a.name="Name is required"),r.description.trim()||(a.description="Description is required"),r.category.length===0&&(a.category="Category is required"),r.images.length?r.images.forEach(s=>{s.type.startsWith("image")||(a.images="Please upload PNG files only")}):a.images="At least one image is required",r.realPrice||(a.realPrice="Real price is required"),r.discountedPrice||(a.discountedPrice="Discounted price is required"),Object.keys(a).length===0)try{p(!0);const s=await y(r.images),l={...r,images:s.data};await E(l),d.success("Product added successfully"),j()}catch(s){console.error("Error adding product:",s),d.error("Error adding product")}finally{p(!1)}else u(a)},j=()=>{c({name:"",description:"",category:[],images:[],realPrice:"",discountedPrice:""}),u({})},y=async t=>{const a=new FormData;t.forEach(s=>{a.append("images",s)}),console.log(a);try{return(await D(a)).data}catch(s){console.error("Error uploading images:",s)}},N=t=>{const a=r.images.filter((s,l)=>l!==t);c({...r,images:a})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsxs("div",{className:"mx-4 md:mx-12 lg:mx-24 xl:mx-36 my-12",children:[e.jsx("h1",{className:"text-3xl font-bold my-4 text-center",children:"Add New Product"}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block font-semibold mb-1",children:"Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:o,placeholder:"Enter product name",className:"w-full px-3 py-2 border rounded-md"}),i.name&&e.jsx("p",{className:"text-red-500 text-sm",children:i.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block font-semibold mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:o,className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter product description"}),i.description&&e.jsx("p",{className:"text-red-500 text-sm",children:i.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block font-semibold mb-1",children:"Category"}),e.jsx(F,{isMulti:!0,id:"category",name:"category",options:h,value:h.filter(t=>r.category.includes(t.value)),onChange:x,className:"w-full px-3 py-2 rounded-md",placeholder:"Enter product category"}),i.category&&e.jsx("p",{className:"text-red-500 text-sm",children:i.category})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"images",className:"block font-semibold mb-1",children:"Images"}),e.jsx("input",{type:"file",id:"images",name:"images",onChange:b,accept:"image/*",multiple:!0,className:"w-full px-3 py-2 border rounded-md",disabled:r.images.length===5}),i.images&&e.jsx("p",{className:"text-red-500 text-sm",children:i.images}),e.jsx("div",{className:"flex flex-wrap",children:r.images.map((t,a)=>e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute top-3 right-3 text-red-700 cursor-pointer bg-white rounded-md",onClick:()=>N(a)}),e.jsx("img",{src:URL.createObjectURL(t),alt:`Preview ${a+1}`,className:"mt-2 mr-2 w-24 h-24 object-cover"})]},a))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"realPrice",className:"block font-semibold mb-1",children:"Real Price"}),e.jsx("input",{type:"number",id:"realPrice",name:"realPrice",value:r.realPrice,onChange:o,className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter real price of the item."}),i.realPrice&&e.jsx("p",{className:"text-red-500 text-sm",children:i.realPrice})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"discountedPrice",className:"block font-semibold mb-1",children:"Discounted Price"}),e.jsx("input",{type:"number",id:"discountedPrice",name:"discountedPrice",value:r.discountedPrice,onChange:o,className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter discounted price of the item."}),i.discountedPrice&&e.jsx("p",{className:"text-red-500 text-sm",children:i.discountedPrice})]})]}),e.jsx("button",{type:"submit",className:"col-span-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:g,children:g?"Loading ....":"Add Product"})]})]}),e.jsx(C,{})]})};export{q as default};
